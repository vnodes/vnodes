{
    "$schema": "https://json-schema.org/draft-07/schema#",
    "$id": "Model",
    "title": "Model",
    "description": "Schema to design database models",
    "properties": {
        "type": {
            "description": "The model marked abstract is for providing common model options not an actual models",
            "enum": [
                "model",
                "abstract-model",
                "object"
            ],
            "default": true
        },
        "name": {
            "description": "Model name",
            "$ref": "#/definitions/modelName"
        },
        "internal": {
            "type": "boolean"
        },
        "readonly": {
            "type": "boolean"
        },
        "encrypt": {
            "type": "boolean"
        },
        "description": {
            "type": "string"
        },
        "extends": {
            "type": "array",
            "items": {
                "$ref": "#/definitions/modelName"
            },
            "minItems": 1
        },
        "properties": {
            "patternProperties": {
                "[a-zA-Z]": {
                    "$ref": "#/definitions/property"
                }
            },
            "propertyNames": {
                "$ref": "#/definitions/propertyName"
            }
        },
        "relations": {
            "patternProperties": {
                "[a-zA-Z]": {
                    "$ref": "#/definitions/relation"
                }
            },
            "propertyNames": {
                "$ref": "#/definitions/propertyName"
            }
        },
        "uniques": {
            "type": "array",
            "items": {
                "type": "array",
                "items": {
                    "$ref": "#/definitions/propertyName"
                }
            }
        },
        "indexes": {
            "type": "array",
            "items": {
                "type": "array",
                "items": {
                    "$ref": "#/definitions/propertyName"
                }
            }
        }
    },
    "definitions": {
        "property": {
            "oneOf": [
                {
                    "$ref": "#/definitions/string-property"
                },
                {
                    "$ref": "#/definitions/integer-property"
                },
                {
                    "$ref": "#/definitions/number-property"
                },
                {
                    "$ref": "#/definitions/boolean-property"
                },
                {
                    "$ref": "#/definitions/date-property"
                },
                {
                    "$ref": "#/definitions/json-property"
                },
                {
                    "$ref": "#/definitions/enum-property"
                },
                {
                    "$ref": "#/definitions/array-property"
                }
            ],
            "required": [
                "type"
            ]
        },
        "common": {
            "properties": {
                "unique": {
                    "type": "boolean",
                    "default": true
                },
                "required": {
                    "type": "boolean",
                    "default": true
                },
                "readonly": {
                    "type": "boolean",
                    "default": true
                },
                "internal": {
                    "type": "boolean",
                    "default": true
                },
                "hidden": {
                    "type": "boolean",
                    "default": true
                },
                "description": {
                    "type": "string"
                },
                "inputComponent": {
                    "$ref": "#/definitions/inputComponent"
                },
                "label": {
                    "type": "string",
                    "default": "Add label"
                },
                "hint": {
                    "type": "string",
                    "default": "Add hint"
                },
                "hash": {
                    "type": "boolean",
                    "default": true
                },
                "encrypt": {
                    "type": "boolean",
                    "default": true
                },
                "prefixText": {
                    "type": "string"
                },
                "suffixText": {
                    "type": "string"
                },
                "prefixIcon": {
                    "$ref": "#/definitions/icon"
                },
                "suffixIcon": {
                    "$ref": "#/definitions/icon"
                },
                "dependsOn": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/propertyName"
                    },
                    "uniqueItems": true
                }
            }
        },
        "string": {
            "properties": {
                "type": {
                    "const": "string"
                },
                "isId": {
                    "type": "boolean",
                    "default": true
                },
                "generated": {
                    "$ref": "#/definitions/generatedString"
                },
                "default": {
                    "type": "string"
                },
                "minLength": {
                    "type": "integer",
                    "minimum": 1,
                    "default": 3
                },
                "maxLength": {
                    "type": "integer",
                    "minimum": 1,
                    "default": 255
                },
                "format": {
                    "$ref": "#/definitions/stringFormat"
                },
                "notIn": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "uniqueItems": true
                },
                "pattern": {
                    "type": "string",
                    "description": "Regular expression"
                }
            },
            "additionalProperties": {
                "$ref": "#/definitions/common",
                "additionalProperties": false
            }
        },
        "integer": {
            "properties": {
                "type": {
                    "const": "integer"
                },
                "default": {
                    "type": "integer"
                },
                "isId": {
                    "type": "boolean",
                    "default": true
                },
                "generated": {
                    "$ref": "#/definitions/generatedInteger"
                },
                "minimum": {
                    "type": "integer"
                },
                "maximum": {
                    "type": "integer"
                },
                "notIn": {
                    "type": "integer"
                }
            }
        },
        "boolean": {
            "properties": {
                "type": {
                    "const": "boolean"
                },
                "default": {
                    "type": "boolean",
                    "default": true
                }
            }
        },
        "number": {
            "properties": {
                "type": {
                    "const": "number"
                },
                "default": {
                    "type": "number",
                    "default": 1
                },
                "minimum": {
                    "type": "number"
                },
                "maximum": {
                    "type": "number"
                },
                "notIn": {
                    "type": "number"
                }
            }
        },
        "date": {
            "properties": {
                "type": {
                    "const": "date"
                },
                "isCreatedAt": {
                    "type": "boolean",
                    "default": true
                },
                "isUpdatedAt": {
                    "type": "boolean",
                    "default": true
                },
                "isDeletedAt": {
                    "type": "boolean",
                    "default": true
                },
                "default": {
                    "type": "string",
                    "default": "now()"
                },
                "past": {
                    "type": "boolean",
                    "default": true
                },
                "future": {
                    "type": "boolean",
                    "default": true
                },
                "maxAge": {
                    "type": "integer"
                },
                "minAge": {
                    "type": "integer"
                },
                "maxMonth": {
                    "type": "integer"
                },
                "minMonth": {
                    "type": "integer"
                },
                "maxWeek": {
                    "type": "integer"
                },
                "minWeek": {
                    "type": "integer"
                },
                "maxDay": {
                    "type": "integer"
                },
                "minDay": {
                    "type": "integer"
                },
                "maxHour": {
                    "type": "integer"
                },
                "minHour": {
                    "type": "integer"
                },
                "maxMinute": {
                    "type": "integer"
                },
                "minMinute": {
                    "type": "integer"
                },
                "maxSecond": {
                    "type": "integer"
                },
                "minSecond": {
                    "type": "integer"
                }
            }
        },
        "enum": {
            "title": "Enum property",
            "properties": {
                "type": {
                    "const": "enum"
                },
                "enum": {
                    "$ref": "#/definitions/enumNames"
                }
            },
            "required": [
                "type",
                "enum"
            ]
        },
        "json": {
            "properties": {
                "type": {
                    "const": "json"
                },
                "schema": {
                    "$ref": "#"
                }
            }
        },
        "array": {
            "properties": {
                "type": {
                    "const": "array"
                },
                "items": {
                    "$ref": "#/definitions/property"
                },
                "maxItems": {
                    "type": "integer",
                    "minimum": 1
                },
                "minItems": {
                    "type": "integer",
                    "minimum": 1
                }
            }
        },
        "string-property": {
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/string"
                }
            ]
        },
        "number-property": {
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/number"
                }
            ]
        },
        "integer-property": {
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/integer"
                }
            ]
        },
        "boolean-property": {
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/boolean"
                }
            ]
        },
        "json-property": {
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/json"
                }
            ]
        },
        "date-property": {
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/date"
                }
            ]
        },
        "enum-property": {
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/enum"
                }
            ]
        },
        "array-property": {
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/array"
                }
            ]
        },
        "relationAllOptions": {
            "title": "Relation Property",
            "$id": "relation",
            "properties": {
                "type": {
                    "enum": [
                        "many-to-one",
                        "many-to-many",
                        "one-to-one",
                        "one-to-many"
                    ],
                    "default": "many-to-one"
                },
                "required": {
                    "type": "boolean",
                    "default": true
                },
                "relationLabel": {
                    "type": "string"
                },
                "model": {
                    "$ref": "#/definitions/modelName"
                },
                "inversedBy": {
                    "description": "The relative column name in the target relation model",
                    "$ref": "#/definitions/propertyName"
                },
                "mappedBy": {
                    "description": "The relative column name in the target relation model",
                    "$ref": "#/definitions/propertyName"
                },
                "references": {
                    "description": "A list of reference columns to the model",
                    "type": "array",
                    "items": {
                        "properties": {
                            "name": {
                                "description": "The name of the column in this model",
                                "$ref": "#/definitions/propertyName"
                            },
                            "reference": {
                                "description": "The name of the column of the relation model",
                                "$ref": "#/definitions/propertyName"
                            }
                        }
                    },
                    "patternProperties": {
                        "[a-zA-Z]": {
                            "$ref": "#/definitions/propertyName"
                        }
                    },
                    "propertyNames": {
                        "$ref": "#/definitions/propertyName"
                    }
                },
                "onDelete": {
                    "$ref": "#/definitions/relationAction"
                },
                "onUpdate": {
                    "$ref": "#/definitions/relationAction"
                },
                "include": {
                    "type": "boolean",
                    "default": true
                },
                "query": {
                    "type": "boolean",
                    "default": true
                }
            }
        },
        "relationForOwner": {
            "title": "Relation for owner",
            "$id": "relationForOwner",
            "description": "Owner relation is auto configured",
            "properties": {
                "type": {
                    "const": "owner"
                },
                "model": {
                    "$ref": "#/definitions/modelName"
                }
            }
        },
        "relation": {
            "oneOf": [
                {
                    "$ref": "#/definitions/relationAllOptions"
                },
                {
                    "$ref": "#/definitions/relationForOwner"
                }
            ]
        },
        "relationAction": {
            "title": "Relation action",
            "$id": "relationAction",
            "description": "Relation operation type on delete and update operation",
            "enum": [
                "Cascade",
                "SetNull",
                "NoAction",
                "Default",
                "Restrict"
            ]
        },
        "modelName": {
            "title": "Model name",
            "$id": "modelname",
            "anyOf": [
                {
                    "$ref": "./enums/model-name.json"
                }
            ]
        },
        "enumNames": {
            "title": "Model name",
            "$id": "modelname",
            "anyOf": [
                {
                    "$ref": "./enums/enum-name.json"
                }
            ]
        },
        "propertyName": {
            "title": "Property name",
            "$id": "propertyName",
            "anyOf": [
                {
                    "$ref": "./enums/property-name.json"
                }
            ]
        },
        "icon": {
            "anyOf": [
                {
                    "$ref": "./enums/icon.json"
                },
                {
                    "type": "string"
                }
            ]
        },
        "inputComponent": {
            "enum": [
                "/// String inputs",
                "text",
                "textarea",
                "texteditor",
                "/// Number inputs",
                "number",
                "rate",
                "number-range",
                "/// Date inputs ",
                "date",
                "datetime",
                "time",
                "/// Boolean inputs",
                "switch",
                "switch-group",
                "checkbox",
                "checkbox-group",
                "/// Enum inputs",
                "select",
                "select-list",
                "autocomplete",
                "radio"
            ]
        },
        "stringFormat": {
            "title": "String format",
            "$id": "stringFormat",
            "enum": [
                "email",
                "password",
                "username",
                "token",
                "apiKey",
                "otp",
                "hash",
                "firstName",
                "lastName",
                "fullName",
                "birthDate",
                "gender",
                "nationality",
                "ssn",
                "taxId",
                "phoneNumber",
                "url",
                "domain",
                "handle",
                "slug",
                "bio",
                "ipv4",
                "ipv6",
                "address",
                "street",
                "city",
                "state",
                "province",
                "zipCode",
                "country",
                "countryCode",
                "latitude",
                "longitude",
                "currency",
                "creditCard",
                "iban",
                "swift",
                "sku",
                "barcode",
                "invoiceNumber",
                "uuid",
                "cuid",
                "nanoid",
                "objectId",
                "json",
                "xml",
                "html",
                "markdown",
                "base64",
                "hex",
                "binary",
                "date",
                "time",
                "datetime",
                "timestamp",
                "timezone",
                "duration",
                "filename",
                "extension",
                "mimeType",
                "path",
                "colorHex",
                "colorRgb"
            ]
        },
        "generatedString": {
            "title": "Generated string",
            "$id": "generatedString",
            "enum": [
                "uuid7",
                "uuid4"
            ]
        },
        "generatedInteger": {
            "enum": [
                "autoincrement"
            ]
        }
    }
}