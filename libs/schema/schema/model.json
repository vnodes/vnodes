{
    "$schema": "https://json-schema.org/draft-07/schema#",
    "title": "Model Options",
    "description": "Schema to design data models",
    "properties": {
        "type": {
            "$ref": "./enums/model-type.json"
        },
        "name": {
            "description": "Model name",
            "$ref": "#/definitions/modelName"
        },
        "internal": {
            "type": "boolean"
        },
        "readonly": {
            "type": "boolean"
        },
        "encrypt": {
            "type": "boolean"
        },
        "description": {
            "type": "string"
        },
        "extends": {
            "type": "array",
            "items": {
                "$ref": "#/definitions/modelName"
            },
            "minItems": 1
        },
        "properties": {
            "patternProperties": {
                ".*": {
                    "allOf": [
                        {
                            "$ref": "#/definitions/property"
                        },
                        {
                            "required": [
                                "type"
                            ]
                        }
                    ]
                }
            },
            "propertyNames": {
                "$ref": "#/definitions/propertyName"
            }
        },
        "relations": {
            "patternProperties": {
                "[a-zA-Z]": {
                    "$ref": "#/definitions/relation"
                }
            },
            "propertyNames": {
                "$ref": "#/definitions/propertyName"
            }
        },
        "uniques": {
            "type": "array",
            "items": {
                "type": "array",
                "items": {
                    "$ref": "#/definitions/propertyName"
                }
            }
        },
        "indexes": {
            "type": "array",
            "items": {
                "type": "array",
                "items": {
                    "$ref": "#/definitions/propertyName"
                }
            }
        }
    },
    "definitions": {
        "property": {
            "title": "property options",
            "oneOf": [
                {
                    "$ref": "#/definitions/string-property"
                },
                {
                    "$ref": "#/definitions/integer-property"
                },
                {
                    "$ref": "#/definitions/number-property"
                },
                {
                    "$ref": "#/definitions/boolean-property"
                },
                {
                    "$ref": "#/definitions/date-property"
                },
                {
                    "$ref": "#/definitions/json-property"
                },
                {
                    "$ref": "#/definitions/enum-property"
                },
                {
                    "$ref": "#/definitions/array-property"
                }
            ],
            "required": [
                "type"
            ]
        },
        "common": {
            "title": "common options",
            "properties": {
                "unique": {
                    "type": "boolean",
                    "default": true
                },
                "required": {
                    "type": "boolean",
                    "default": true
                },
                "readonly": {
                    "type": "boolean",
                    "default": true
                },
                "internal": {
                    "type": "boolean",
                    "default": true
                },
                "hidden": {
                    "type": "boolean",
                    "default": true
                },
                "description": {
                    "type": "string"
                },
                "inputComponent": {
                    "$ref": "#/definitions/inputComponent"
                },
                "label": {
                    "type": "string",
                    "default": "Add label"
                },
                "hint": {
                    "type": "string",
                    "default": "Add hint"
                },
                "hash": {
                    "type": "boolean",
                    "default": true
                },
                "encrypt": {
                    "type": "boolean",
                    "default": true
                },
                "prefixText": {
                    "type": "string"
                },
                "suffixText": {
                    "type": "string"
                },
                "prefixIcon": {
                    "$ref": "#/definitions/icon"
                },
                "suffixIcon": {
                    "$ref": "#/definitions/icon"
                },
                "dependsOn": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/propertyName"
                    },
                    "uniqueItems": true
                }
            }
        },
        "string": {
            "title": "string options",
            "properties": {
                "type": {
                    "const": "string"
                },
                "isId": {
                    "type": "boolean",
                    "default": true
                },
                "generated": {
                    "$ref": "#/definitions/generatedString"
                },
                "default": {
                    "type": "string"
                },
                "minLength": {
                    "type": "integer",
                    "minimum": 1,
                    "default": 3
                },
                "maxLength": {
                    "type": "integer",
                    "minimum": 1,
                    "default": 255
                },
                "format": {
                    "$ref": "#/definitions/stringFormat"
                },
                "notIn": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "uniqueItems": true
                },
                "pattern": {
                    "type": "string",
                    "description": "Regular expression"
                }
            }
        },
        "integer": {
            "title": "integer options",
            "properties": {
                "type": {
                    "const": "integer"
                },
                "default": {
                    "type": "integer"
                },
                "isId": {
                    "type": "boolean",
                    "default": true
                },
                "generated": {
                    "$ref": "#/definitions/generatedInteger"
                },
                "minimum": {
                    "type": "integer"
                },
                "maximum": {
                    "type": "integer"
                },
                "notIn": {
                    "type": "integer"
                }
            }
        },
        "boolean": {
            "title": "boolean options",
            "properties": {
                "type": {
                    "const": "boolean"
                },
                "default": {
                    "type": "boolean",
                    "default": true
                }
            }
        },
        "number": {
            "title": "number options",
            "properties": {
                "type": {
                    "const": "number"
                },
                "default": {
                    "type": "number",
                    "default": 1
                },
                "minimum": {
                    "type": "number"
                },
                "maximum": {
                    "type": "number"
                },
                "notIn": {
                    "type": "number"
                }
            }
        },
        "date": {
            "title": "date options",
            "properties": {
                "type": {
                    "const": "date"
                },
                "isCreatedAt": {
                    "type": "boolean",
                    "default": true
                },
                "isUpdatedAt": {
                    "type": "boolean",
                    "default": true
                },
                "isDeletedAt": {
                    "type": "boolean",
                    "default": true
                },
                "default": {
                    "type": "string",
                    "default": "now()"
                },
                "past": {
                    "type": "boolean",
                    "default": true
                },
                "future": {
                    "type": "boolean",
                    "default": true
                },
                "maxAge": {
                    "type": "integer"
                },
                "minAge": {
                    "type": "integer"
                },
                "maxMonth": {
                    "type": "integer"
                },
                "minMonth": {
                    "type": "integer"
                },
                "maxWeek": {
                    "type": "integer"
                },
                "minWeek": {
                    "type": "integer"
                },
                "maxDay": {
                    "type": "integer"
                },
                "minDay": {
                    "type": "integer"
                },
                "maxHour": {
                    "type": "integer"
                },
                "minHour": {
                    "type": "integer"
                },
                "maxMinute": {
                    "type": "integer"
                },
                "minMinute": {
                    "type": "integer"
                },
                "maxSecond": {
                    "type": "integer"
                },
                "minSecond": {
                    "type": "integer"
                }
            }
        },
        "enum": {
            "title": "enum options",
            "properties": {
                "type": {
                    "const": "enum"
                },
                "enum": {
                    "$ref": "#/definitions/enumModel"
                }
            },
            "required": [
                "type",
                "enum"
            ]
        },
        "json": {
            "title": "json options",
            "properties": {
                "type": {
                    "const": "json"
                },
                "schema": {
                    "$ref": "#"
                }
            }
        },
        "array": {
            "title": "array options",
            "properties": {
                "type": {
                    "const": "array"
                },
                "items": {
                    "$ref": "#/definitions/property"
                },
                "maxItems": {
                    "type": "integer",
                    "minimum": 1
                },
                "minItems": {
                    "type": "integer",
                    "minimum": 1
                }
            }
        },
        "string-property": {
            "title": "string property options",
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/string"
                }
            ]
        },
        "number-property": {
            "title": "number property options",
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/number"
                }
            ]
        },
        "integer-property": {
            "title": "integer property options",
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/integer"
                }
            ]
        },
        "boolean-property": {
            "title": "boolean property options",
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/boolean"
                }
            ]
        },
        "json-property": {
            "title": "json property options",
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/json"
                }
            ]
        },
        "date-property": {
            "title": "date property options",
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/date"
                }
            ]
        },
        "enum-property": {
            "title": "enum property options",
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/enum"
                }
            ]
        },
        "array-property": {
            "title": "array property options",
            "allOf": [
                {
                    "$ref": "#/definitions/common"
                },
                {
                    "$ref": "#/definitions/array"
                }
            ]
        },
        "relationAllOptions": {
            "title": "relation all property options",
            "properties": {
                "type": {
                    "enum": [
                        "many-to-one",
                        "many-to-many",
                        "one-to-one",
                        "one-to-many"
                    ],
                    "default": "many-to-one"
                },
                "required": {
                    "type": "boolean",
                    "default": true
                },
                "relationLabel": {
                    "type": "string"
                },
                "model": {
                    "$ref": "#/definitions/modelName"
                },
                "inversedBy": {
                    "description": "The relative column name in the target relation model",
                    "$ref": "#/definitions/propertyName"
                },
                "mappedBy": {
                    "description": "The relative column name in the target relation model",
                    "$ref": "#/definitions/propertyName"
                },
                "references": {
                    "description": "A list of reference columns to the model",
                    "type": "array",
                    "items": {
                        "properties": {
                            "name": {
                                "description": "The name of the column in this model",
                                "$ref": "#/definitions/propertyName"
                            },
                            "reference": {
                                "description": "The name of the column of the relation model",
                                "$ref": "#/definitions/propertyName"
                            }
                        }
                    },
                    "patternProperties": {
                        "[a-zA-Z]": {
                            "$ref": "#/definitions/propertyName"
                        }
                    },
                    "propertyNames": {
                        "$ref": "#/definitions/propertyName"
                    }
                },
                "onDelete": {
                    "$ref": "#/definitions/relationAction"
                },
                "onUpdate": {
                    "$ref": "#/definitions/relationAction"
                },
                "include": {
                    "type": "boolean",
                    "default": true
                },
                "query": {
                    "type": "boolean",
                    "default": true
                }
            }
        },
        "relationForOwner": {
            "title": "relation for owner options",
            "description": "Owner relation is auto configured",
            "properties": {
                "type": {
                    "const": "owner"
                },
                "model": {
                    "$ref": "#/definitions/modelName"
                }
            }
        },
        "relation": {
            "title": "relation options",
            "oneOf": [
                {
                    "$ref": "#/definitions/relationAllOptions"
                },
                {
                    "$ref": "#/definitions/relationForOwner"
                }
            ]
        },
        "relationAction": {
            "title": "Relation action",
            "description": "Relation operation type on delete and update operation",
            "enum": [
                "Cascade",
                "SetNull",
                "NoAction",
                "Default",
                "Restrict"
            ]
        },
        "modelName": {
            "title": "model name",
            "anyOf": [
                {
                    "$ref": "./enums/model-name.json"
                }
            ]
        },
        "propertyName": {
            "title": "property name",
            "anyOf": [
                {
                    "$ref": "./enums/property-name.json"
                }
            ]
        },
        "icon": {
            "title": "icon",
            "$ref": "./enums/icon.json"
        },
        "inputComponent": {
            "$ref": "./enums/input-component.json"
        },
        "stringFormat": {
            "$ref": "./enums/string-format.json"
        },
        "generatedString": {
            "$ref": "./enums/generated-string.json"
        },
        "generatedInteger": {
            "$ref": "./enums/generated-integer.json"
        },
        "enumModel": {
            "$ref": "./enum-model.json"
        }
    }
}